<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        img {
            width: 300px;
            height: 300px;
        }

        .item {
            display: flex;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- <select id="selectColor"></select>
        <select id="selectStorage"></select>
        <select id="selectWifi"></select> -->
        <div class="item"></div>
        <div class="item"></div>
        <div class="item"></div>
    </div>
    <div class="warp"></div>
    <div class="item"></div>
    <script>
        let url = 'https://raw.githubusercontent.com/B10910066z/iPad-json--/master/iPad.json';
        let ipadNewJson = {};
        let ipadJson = [];
        let ipadColor = [];
        let ipadStorage = [];
        let ipadWifi = [];

        window.onload = function () {
            fetch(url)
                .then(function (response) {
                    return response.json();
                })
                .then(function (result) {
                    ipadNewJson = result;
                    ipadJson = ipadNewJson.ipad;
                    ipadColor = ipadNewJson.color;
                    ipadStorage = ipadNewJson.storage;
                    ipadWifi = ipadNewJson.network;
                    let container = document.querySelector('.container');
                    let itemColor = document.getElementsByClassName('item')[0];
                    let itemStorage = document.getElementsByClassName('item')[1];
                    let itemWifi = document.getElementsByClassName('item')[2];
                    let selectColor = document.querySelector('#selectColor');
                    let selectStorage = document.querySelector('#selectStorage');
                    let selectWifi = document.querySelector('#selectWifi');
                    let warp = document.querySelector('.warp');
                    let item = document.querySelector('.warp + .item')

                    ipadColor.forEach(element => {
                        let input = document.createElement('input');
                        let h3 = document.createElement('h3');
                        input.type = 'radio';
                        input.name = 'inputColor';
                        h3.innerText = element;
                        itemColor.append(input, h3);
                        // let option = document.createElement('option');
                        // option.text = element;
                        // selectColor.append(option);
                    });
                    for (let i = 1; i <= ipadColor.length; i++) {
                        let input = document.querySelector(`.container .item:nth-of-type(1) input:nth-of-type(${i})`);
                        input.addEventListener('change', function (event) {
                            warp.innerHTML = "";
                            let img = document.createElement('img');
                            let ipadColorNum = ipadColor[i - 1];
                            let path = `https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-finish-select-gallery-202211-${ipadColorNum}?wid=2560&hei=1440&fmt=p-jpg&qlt=95&.v=1667585247239`;
                            img.src = path;
                            warp.append(img);
                        })
                    }
                    ipadStorage.forEach(element => {
                        let input = document.createElement('input');
                        let h3 = document.createElement('h3');
                        input.type = 'radio';
                        input.name = 'inputStorage';
                        h3.innerText = element;
                        itemStorage.append(input, h3);
                        // let option = document.createElement('option');
                        // option.text = element;
                        // selectStorage.append(option);
                    });
                    ipadWifi.forEach(element => {
                        let input = document.createElement('input');
                        let h3 = document.createElement('h3');
                        input.type = 'radio';
                        input.name = 'inputWifi';
                        h3.innerText = element;
                        itemWifi.append(input, h3);
                        // let option = document.createElement('option');
                        // option.text = element;
                        // selectWifi.append(option);
                    });
                    let round = 0;
                    for (let i = 1; i <= ipadStorage.length; i++) {
                        for (let j = 1; j <= ipadWifi.length; j++) {
                            let input1 = document.querySelector(`.container .item:nth-of-type(2) input:nth-of-type(${i})`);
                            let input2 = document.querySelector(`.container .item:nth-of-type(3) input:nth-of-type(${j})`);
                            input1.addEventListener('change', function (event) { 
                                if(round != 0){
                                    item.innerHTML = "";
                                    let h2 = document.createElement('h2');
                                    let price;
                                    if (i === 1 && j === 1) {
                                        price = 19900;
                                    }
                                    else if (i === 2 && j === 1) {
                                        price = 24900;
                                    }
                                    else if (i === 1 && j === 2) {
                                        price = 24900;
                                    }
                                    else if (i === 2 && j === 2) {
                                        price = 29900;
                                    }
                                    h2.innerText = `NT$${price}`
                                    item.append(h2);
                                }                                                            
                                input2.addEventListener('change', function (event) {
                                    item.innerHTML = "";
                                    let h2 = document.createElement('h2');
                                    let price;
                                    if (i === 1 && j === 1) {
                                        price = 19900;
                                    }
                                    else if (i === 2 && j === 1) {
                                        price = 24900;
                                    }
                                    else if (i === 1 && j === 2) {
                                        price = 24900;
                                    }
                                    else if (i === 2 && j === 2) {
                                        price = 29900;
                                    }
                                    h2.innerText = `NT$${price}`
                                    item.append(h2);
                                    round++;
                                })

                            })
                        }
                    }




                    // ipadJson.forEach(element => {
                    //     let item = document.createElement('div');
                    //     item.setAttribute('class', 'item');
                    //     let path = `https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-finish-select-gallery-202211-${element.color}?wid=2560&hei=1440&fmt=p-jpg&qlt=95&.v=1667585247239`
                    //     let buy = "";
                    //     buy += `<img src="${path}">`;
                    //     buy += `<h2>顏色:${element.color}</h2>`;
                    //     buy += `<h2>容量:${element.storage}GB</h2>`;
                    //     buy += `<h2>網路:${element.network}</h2>`;
                    //     buy += `<h2>價格:${element.price}</h2>`;
                    //     item.innerHTML = buy;
                    //     item.style.backgroundColor = "aqua";
                    //     item.style.padding = "10px";
                    //     container.append(item);
                    // });
                })


        }

        // let xhr = new XMLHttpRequest();
        // let url = 'https://github.com/B10910066z/iPad-json--.git';
        // window.onload = function () {
        //     xhr.onload = function () {
        //         let ipadObject = JSON.parse(xhr.responseText);
        //         let ipadAJAX = ipadObject.ipad;
        //         non2.forEach(element => {
        //             alert("hi");
        //         });
        //     }
        //     xhr.open('GET', url);
        //     xhr.send();
        // }

    </script>
</body>

</html>
